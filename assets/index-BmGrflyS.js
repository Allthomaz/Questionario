(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const x=[{title:"Trato Digestivo",questions:["Náusea ou vômitos","Diarréia","Constipação / prisão de ventre","Estufamento abdominal","Arrotos ou gases","Queimação (azia) no peito","Dor estomacal / intestinal"]},{title:"Energia / Atividade",questions:["Fadiga ou lentidão","Apatia, letargia","Hiperatividade","Inquietude, dificuldade em relaxar"]},{title:"Ouvidos",questions:["Coceira","Dor de ouvido ou otites","Presença de secreção no ouvido","Zumbido ou perda auditiva"]},{title:"Emoções",questions:["Alterações de humor","Ansiedade, medo ou nervosismo","Depressão"]},{title:"Olhos",questions:["Lacrimejando ou coceira ocular","Olhos inchados/vermelhos/cílios colando","Bolsas ou olheiras abaixo dos olhos","Visão borrada ou em túnel"]},{title:"Cabeça",questions:["Dor de cabeça","Sensação de desmaio","Tonturas","Insônia"]},{title:"Pulmões",questions:["Congestão no peito","Asma, bronquite","Respiração rápida, pouco fôlego","Dificuldade de respirar"]},{title:"Mente",questions:["Pouca memória","Confusão, má compreensão","Dificuldade de concentração","Má coordenação motora","Dificuldade em tomar decisões","Gagueira ou incoordenação da voz","Fala arrastada","Pronúncia de forma confusa","Dificuldade de aprendizado"]},{title:"Articulações / Músculos",questions:["Dor ou inchaços nas juntas","Artrite / Artrose","Rigidez ou limitação de movimento","Dor ou inchaço muscular","Sensação de fraqueza ou cansaço"]},{title:"Coração",questions:["Batimentos cardíacos irregulares","Batidas rápidas demais (Taquicardia)","Dor torácica"]},{title:"Peso",questions:["Compulsão alimentar / álcool","Fissura por certos alimentos","Ganho de peso","Compulsão alimentar","Retenção de líquidos","Perda de peso"]},{title:"Nariz",questions:["Entupido","Sinusite","Corrimento nasal, espirros, lacrimejamento e coceira dos olhos","Ataques de espirro","Excessiva secreção nasal"]},{title:"Pele",questions:["Acne","Feridas que coçam, erupções ou pele seca","Perda de cabelo","Vermelhidão, calorões","Suor excessivo"]},{title:"Outros",questions:["Doenças frequentes","Aumento da frequência ou urgência urinária","Coceira ou secreção genitais","Edema / inchaço de mãos / pernas / pés"]},{title:"Boca / Garganta",questions:["Tosse crônica","Necessidade frequente de limpar a garganta","Dor de garganta, rouquidão, perda da voz","Língua, gengiva ou lábios inchados descoloridos ou pálidos","Aftas"]}],h=["Eu como pão quase diariamente","Tomo suco de frutas (de qualquer tipo)","Como mais de três frutas por dia","Uso adoçante artificial","Caminho menos de 50 min/dia na maior parte dos dias","Fico ofegante ao caminhar","Como pouca salada","Estou acima do peso (IMC > 24.9)","Como arroz, massa ou pão à noite","Tomo leite pasteurizado","Tenho histórico familiar de problemas neurológicos","Evito comer gorduras de qualquer tipo","Tomo remédio para colesterol","Tomo refrigerante (seja diet ou normal)","Tomo pouca água (menos de 2 litros por dia)","Tomo cerveja","Como cereais (aveia, granola, musli, sucrilhos, trigo, etc)","Tive problemas auditivos por 10 anos","Durmo com celular no quarto","Fumei pelo menos 10 anos","Tive depressão/ansiedade por 10 anos","Tomei remédio para dormir por 10 anos","Ronco à noite e/ou tenho apnéia do sono","Minha pressão é maior que 120/80 mmHg às vezes","Meu colesterol HDL é inferior a 50 mg/dl","Minha vitamina B12 é inferior a 500 pg/ml","Minha vitamina D é inferior a 50 ng/dl","Minha glicose é superior a 89 mg/ml","Minha insulina de jejum é > 6 uU/ml","Minha homocisteína é > 7 micromol/L","Meu PCR-us é > 0.7 mg/dL"];function S(t){let o=0;if(Array.isArray(t))o=t.reduce((e,s)=>e+Number(s),0);else for(const e of Object.values(t))o+=Number(e);let a;return o<10?a="Normal":o<50?a="Leve":o<100?a="Moderada":a="Grave",{total:o,level:a}}function D(t){let o=0;if(Array.isArray(t))o=t.reduce((e,s)=>e+Number(s),0);else for(const e of Object.values(t))o+=Number(e);let a;return o===0?a="Ideal":o<=9?a="Leve":o<=20?a="Moderado":a="Grave",{total:o,level:a}}function f(t,o=[],a=""){const e=document.createElement(t);return o.length&&e.classList.add(...o),a&&(e.textContent=a),e}function A(){const t=document.getElementById("inflammation-questions"),o=document.getElementById("mental-risk-questions");t.innerHTML="",o.innerHTML="";let a=0;x.forEach(e=>{const s=f("h3",["text-lg","font-bold","text-cyan-700","mt-4","mb-2"],e.title);t.appendChild(s),e.questions.forEach(n=>{const r=f("div",["flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","py-2","border-b","border-gray-200","last:border-0"]),i=`inflamacao_${a}`,m=f("label",["flex-1","mr-4","text-sm","mb-2","sm:mb-0"],n),l=f("div",["flex","items-center","space-x-2","inflammation-radio"]);for(let c=0;c<=4;c++){const u=`q-${a}-${c}`,d=f("input");d.type="radio",d.name=i,d.id=u,d.value=c;const p=f("label",[],c.toString());p.htmlFor=u,l.append(d,p)}r.append(m,l),t.appendChild(r),a++})}),h.forEach(e=>{const s=f("div",["flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","p-3","border","border-gray-200","rounded-lg"]),n=f("label",["flex-1","mr-4","text-sm","mb-2","sm:mb-0"],e),r=f("div",["flex","items-center","space-x-2","mental-radio"]),i=`risco_mental_${a}`,m=`q-${a}-0`,l=f("input");l.type="radio",l.name=i,l.id=m,l.value="0";const c=f("label",[],"Não");c.htmlFor=m;const u=`q-${a}-1`,d=f("input");d.type="radio",d.name=i,d.id=u,d.value="1";const p=f("label",[],"Sim");p.htmlFor=u,r.append(l,c,d,p),s.append(n,r),o.appendChild(s),a++})}function F(t,o,a,e){const s=document.getElementById("inflammation-score"),n=document.getElementById("inflammation-level"),r=document.getElementById("inflammation-result");let i;t<10?i="bg-green-100 text-green-700":t<50?i="bg-yellow-100 text-yellow-700":t<100?i="bg-orange-100 text-orange-700":i="bg-red-100 text-red-700",s.textContent=t,n.textContent=a,r.className=`p-4 rounded-lg ${i.split(" ")[0]}`,s.className=`text-5xl font-bold my-2 ${i.split(" ")[1]}`;const m=document.getElementById("mental-risk-score"),l=document.getElementById("mental-risk-level"),c=document.getElementById("mental-risk-result");let u;o===0?u="bg-green-100 text-green-700":o<=9?u="bg-yellow-100 text-yellow-700":o<=20?u="bg-orange-100 text-orange-700":u="bg-red-100 text-red-700",m.textContent=`${o} / ${h.length}`,l.textContent=e,c.className=`p-4 rounded-lg ${u.split(" ")[0]}`,m.className=`text-5xl font-bold my-2 ${u.split(" ")[1]}`}function $(t,o){const a=(t-1)/(o-1)*100,e=document.getElementById("progress-bar"),s=document.getElementById("progress-text");e.style.width=`${a}%`,s.textContent=`${Math.round(a)}%`}function q(t,o){for(let r=1;r<=o;r++){const i=document.getElementById(`step-${r}`);i&&i.classList.add("hidden")}const a=document.getElementById(`step-${t}`);a&&a.classList.remove("hidden");const e=document.getElementById("prevBtn"),s=document.getElementById("nextBtn"),n=document.getElementById("navigation-container");t===1?(e.classList.add("hidden"),s.textContent="Próximo",n.classList.remove("hidden")):t===o?n.classList.add("hidden"):(e.classList.remove("hidden"),s.textContent=t===o-1?"Ver Resultados":"Próximo",n.classList.remove("hidden")),$(t,o),window.scrollTo({top:0,behavior:"smooth"})}function _(t){const o=document.getElementById(`step-${t}`);let a=!0;o.querySelectorAll("input[required]").forEach(n=>{n.value||(a=!1,n.classList.add("border-red-500","ring-1","ring-red-500"),n.addEventListener("input",()=>{n.classList.remove("border-red-500","ring-1","ring-red-500")},{once:!0}))});const s=o.querySelectorAll('input[type="radio"]');if(s.length>0){const n={};s.forEach(r=>{n[r.name]||(n[r.name]=[]),n[r.name].push(r)});for(const r in n){const i=n[r];if(!i.some(l=>l.checked)){a=!1;const l=i[0].parentElement.parentElement;l&&(l.classList.add("bg-red-50","border-red-300"),i.forEach(c=>{c.addEventListener("change",()=>{l.classList.remove("bg-red-50","border-red-300")},{once:!0})}))}}}if(!a){alert("Por favor, responda todas as perguntas obrigatórias antes de prosseguir.");const n=o.querySelector(".border-red-500, .bg-red-50");n&&n.scrollIntoView({behavior:"smooth",block:"center"})}return a}async function P(t,o){const{jsPDF:a}=window.jspdf,e=new a,s=document.getElementById("nome").value||"Paciente",n=new Date().toLocaleDateString("pt-BR"),r=document.getElementById("escore_inflamacao").value,i=document.getElementById("nivel_inflamacao").value,m=document.getElementById("escore_risco_mental").value,l=document.getElementById("nivel_risco_mental").value;e.setFontSize(18),e.setTextColor(0,150,136),e.text("Relatório de Saúde Integrativa",105,20,null,null,"center"),e.setFontSize(14),e.text("Dr. Bruno Paschoalini",105,28,null,null,"center"),e.setFontSize(12),e.setTextColor(0,0,0),e.text(`Paciente: ${s}`,20,45),e.text(`Data: ${n}`,150,45),e.setDrawColor(0,150,136),e.setLineWidth(.5),e.line(20,50,190,50),e.setFontSize(14),e.text("Resumo dos Resultados",20,60),e.setFontSize(12),e.text("Inflamação:",20,70),e.setFont("helvetica","bold"),e.text(`${r} - ${i}`,50,70),e.setFont("helvetica","normal"),e.text("Risco Mental:",110,70),e.setFont("helvetica","bold"),e.text(`${m} - ${l}`,140,70),e.setFont("helvetica","normal");const c=[],u=new FormData(document.getElementById("questionnaireForm"));let d=0;t.forEach(b=>{b.questions.forEach(v=>{const y=u.get(`inflamacao_${d}`);y&&parseInt(y)>=3&&c.push([v,"Inflamação",y+"/4 (Alto)"]),d++})}),o.forEach(b=>{const v=u.get(`risco_mental_${d}`);v&&parseInt(v)===1&&c.push([b,"Risco Mental","Sim"]),d++}),c.length>0?e.autoTable({startY:80,head:[["Sintoma / Fator","Categoria","Resultado"]],body:c,theme:"grid",headStyles:{fillColor:[0,150,136]},styles:{fontSize:10},columnStyles:{0:{cellWidth:100},2:{fontStyle:"bold",textColor:[220,53,69]}}}):(e.setFontSize(11),e.setTextColor(0,128,0),e.text("Parabéns! Nenhum ponto de atenção grave foi identificado neste questionário.",20,90));const p=e.internal.pageSize.height;e.setFontSize(9),e.setTextColor(128,128,128),e.text("Este documento é informativo e não substitui consulta médica.",105,p-10,null,null,"center"),e.save(`Relatorio_DrBruno_${s.replace(/\s+/g,"_")}.pdf`)}const B="https://script.google.com/macros/s/AKfycbz3vlfUppxkUNldq6qzVlKbKnXUV3hz9mtKwWtrg46bGLhehRYJom1rYwk9-t4BVUbiMw/exec";async function T(t){if(B.includes("SUA_URL"))return console.warn("URL da API não configurada."),!1;try{const o=await fetch(B,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});return console.log("Enviado para planilha. Verifique lá."),!0}catch(o){return console.error("Falha no envio:",o),!1}}var R="@vercel/analytics",M="1.6.1",N=()=>{window.va||(window.va=function(...o){(window.vaq=window.vaq||[]).push(o)})};function w(){return typeof window<"u"}function C(){try{const t="production"}catch{}return"production"}function z(t="auto"){if(t==="auto"){window.vam=C();return}window.vam=t}function k(){return(w()?window.vam:C())||"production"}function E(){return k()==="development"}function j(t){return t.scriptSrc?t.scriptSrc:E()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?`${t.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function O(t={debug:!0}){var o;if(!w())return;z(t.mode),N(),t.beforeSend&&((o=window.va)==null||o.call(window,"beforeSend",t.beforeSend));const a=j(t);if(document.head.querySelector(`script[src*="${a}"]`))return;const e=document.createElement("script");e.src=a,e.defer=!0,e.dataset.sdkn=R+(t.framework?`/${t.framework}`:""),e.dataset.sdkv=M,t.disableAutoTrack&&(e.dataset.disableAutoTrack="1"),t.endpoint?e.dataset.endpoint=t.endpoint:t.basePath&&(e.dataset.endpoint=`${t.basePath}/insights`),t.dsn&&(e.dataset.dsn=t.dsn),e.onerror=()=>{const s=E()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${a}. ${s}`)},E()&&t.debug===!1&&(e.dataset.debug="false"),document.head.appendChild(e)}O();let g=1;const L=4;document.addEventListener("DOMContentLoaded",()=>{console.log("App initialized v2 - PDF Fix Applied"),A(),I();const t=document.getElementById("questionnaireForm");t&&t.addEventListener("submit",async a=>{a.preventDefault(),await U()});const o=document.getElementById("btn-pdf");o&&o.addEventListener("click",()=>{P(x,h)})});document.getElementById("nextBtn").addEventListener("click",async()=>{_(g)&&g<L&&(g++,q(g),I(),g===4&&G())});document.getElementById("prevBtn").addEventListener("click",()=>{g>1&&(g--,q(g),I())});function I(){const t=(g-1)/(L-1)*100;document.getElementById("progress-bar").style.width=`${t}%`,document.getElementById("progress-text").innerText=`${Math.round(t)}%`}function G(){const t=document.getElementById("questionnaireForm"),o=new FormData(t),a=[],e=[];let s=0;x.forEach(i=>{i.questions.forEach(()=>{const m=o.get(`inflamacao_${s}`);a.push(m?parseInt(m):0),s++})}),h.forEach(()=>{const i=o.get(`risco_mental_${s}`);e.push(i?parseInt(i):0),s++});const n=S(a),r=D(e);return F(n.total,r.total,n.level,r.level),document.getElementById("escore_inflamacao").value=n.total,document.getElementById("nivel_inflamacao").value=n.level,document.getElementById("escore_risco_mental").value=r.total,document.getElementById("nivel_risco_mental").value=r.level,{inflammationScore:n,mentalRiskScore:r}}async function U(){const t=parseInt(document.getElementById("escore_inflamacao").value)||0,o=parseInt(document.getElementById("escore_risco_mental").value)||0,a=document.getElementById("nascimento").value,e=a?a.split("-").reverse().join("/"):"",s={nome:document.getElementById("nome").value,email:document.getElementById("email").value,nascimento:e,telefone:document.getElementById("telefone").value,escore_inflamacao:t,escore_risco_mental:o},n=document.getElementById("submitButton"),r=n.innerText;n.innerText="Enviando...",n.disabled=!0,T(s).then(i=>{if(i)console.log("Dados sincronizados com a planilha."),document.getElementById("submit-status").innerText="Dados enviados com sucesso!",document.getElementById("submit-status").className="mt-4 text-sm text-green-600 h-5",n.classList.remove("bg-green-600","hover:bg-green-700"),n.classList.add("bg-green-500","hover:bg-green-600"),n.innerText="Enviado!";else throw new Error("Falha no envio (retornou false)")}).catch(i=>{console.error("Erro de rede ou lógica:",i),console.log("Atenção: Configure a URL da planilha em src/services/sheetApi.js"),document.getElementById("submit-status").innerText="Erro ao enviar. Tente novamente.",document.getElementById("submit-status").className="mt-4 text-sm text-red-600 h-5",n.innerText=r,n.disabled=!1})}
